## 作用域

作用域是在运行时代码中的某些特定部分中变量，函数和对象的可访问性。

作用域最大的用处就是隔离变量，不同作用域下同名变量不会有冲突。

**ES6 之前 JavaScript 没有块级作用域,只有全局作用域和函数作用域。ES6的到来，为我们提供了‘块级作用域’，可通过新增命令let和const来体现。**


## 全局作用域

**在代码中任何地方都能访问到的对象拥有全局作用域**，一般来说以下几种情形拥有全局作用域：

- 最外层函数 和在最外层函数外面定义的变量拥有全局作用域。
- 所有末定义直接赋值的变量自动声明为拥有全局作用域。
```
  function outFun2() {
    variable = "未定义直接赋值的变量";
    var inVariable2 = "内层变量2";
}
outFun2();//要先执行这个函数，否则根本不知道里面是啥
console.log(variable); //未定义直接赋值的变量
console.log(inVariable2); //inVariable2 is not defined
```
- 所有window对象的属性拥有全局作用域。

> 全局作用域有个弊端：如果我们写了很多行 JS 代码，变量定义都没有用函数包括，那么它们就全部都在全局作用域中。这样就会 污染全局命名空间, 容易引起命名冲突。

## 函数作用域

**函数作用域,是指声明在函数内部的变量**，和全局作用域相反，局部作用域一般只在固定的代码片段内可访问到，最常见的例如函数内部。

> 作用域是分层的，内层作用域可以访问外层作用域的变量，反之则不行。
> 块语句（大括号“｛｝”中间的语句），如 if 和 switch 条件语句或 for 和 while 循环语句，不像函数，它们不会创建一个新的作用域。在块语句中定义的变量将保留在它们已经存在的作用域中。

## 块级作用域

**块级作用域可通过新增命令let和const声明，所声明的变量在指定块的作用域外无法被访问**。块级作用域在如下情况被创建：

- 在一个函数内部
- 在一个代码块（由一对花括号包裹）内部

let 声明的语法与 var 的语法一致。你基本上可以用 let 来代替 var 进行变量声明，但会将变量的作用域限制在当前代码块中。**块级作用域有以下几个特点**：

- **声明变量不会提升到代码块顶部**
> let/const 声明并不会被提升到当前代码块的顶部，因此你需要手动将 let/const 声明放置到顶部，以便让变量在整个代码块内部可用。

- 禁止重复声明
- 循环中的绑定块作用域的妙用
```
for (let i = 0; i < 10; i++) {
  // ...
}
console.log(i);
// ReferenceError: i is not defined
```


## [作用域链](https://github.com/mqyqingfeng/Blog/issues/4)

当查找变量的时候，会先从当前上下文的变量对象中查找，如果没有找到，就会从父级(词法层面上的父级)执行上下文的变量对象中查找，一直找到全局上下文的变量对象，也就是全局对象。这样由多个执行上下文的变量对象构成的链表就叫做作用域链。

